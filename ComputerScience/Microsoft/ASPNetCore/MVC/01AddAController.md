## Introduction
- More testable
- Easier to update than monolithic apps.
- Parts:
  - **Models**:
    - Represents the data of the app      
      - It has vlidation logic for that data
    - These objects retrieves and stores data from db's    
  - **Views**: 
    - UI
    - Only displays information
  - **Controllers**:
    - Handle browser requests, user input and interaction
      - i.e. it handles URL segments and query-string values, and passes these values to the model. For example:
        - `https://localhost:5001/Home/Privacy`: specifies the `Home` **controller** and the `Privacy` **action**.
        - `https://localhost:5001/Movies/Edit/5`: is a request to edit the movie with `ID=5` using the `Movies` **controller** and the `Edit` **action**.        
    - Retrieve model data
    - Call view templates.

## Add a controller
- In `Solution Explorer (rightclick) > Controllers > Add > Controller`
  - `Add New Scaffolded Item > MVC Controller - Empty > Add > DummyController.cs`
- A dummy code is presented:

``` cs
using Microsoft.AspNetCore.Mvc;
using System.Text.Encodings.Web;

namespace NET_MVC_Dummy.Controllers
{
    public class DummyController : Controller
    {
        // GET: /Dummy/
        public string Index()
        {
            return "This is DummyController";
        }

        // GET: /DummyMethod1/
        public string DummyMethod1()
        {
            return "This is DummyMethod1";
        }

        // GET: /Dummy/DummyMethod2?dummyString=Rufa&dummyInt=4 
        // Requires using System.Text.Encodings.Web;
        public string DummyMethod2(string dummyString, int  dummyInt = 73)
        {
            return HtmlEncoder.Default.Encode($"Data:/n - DummyString = {dummyString} - DummyInteger = {dummyInt}");
        }

        public string DummyId(string dummyString, int ID = 1)
        {
            return HtmlEncoder.Default.Encode($" - DummyString {name}, ID: {ID}");
        }
    }
}
```

- Every public method in a controller is callable as an `HTTP endpoint`.
  - An HTTP endpoint:
    - Is a targetable URL in the web application, such as `https://localhost:5001/Dummy/DummyMethod1``.
    - Combines:
      - The protocol used: HTTPS.
      - The network location of the web server, including the TCP port: `localhost:5001`.
      - The target URI: `DummyMethod1`.
  - `HTTP POST` methods (which updated data) is generated by the scaffolding engine. 

- `HtmlEncoder.Default.Encode` is used to protect the app from malicious input

### Using data 
- The default URL routing logic used by MVC `/[Controller]/[ActionName]/[Parameters]`. (this is set in `Program.cs`)
  - `https://localhost:7122/Dummy/DummyMethod2`
    - `Data:/n - DummyString =  - DummyInteger = 73`
  - `https://localhost:7122/Dummy/DummyMethod2?dummyString=Rufa&dummyInt=4` returns:
    - `Data:/n - DummyString = Rufa - DummyInteger = 4`
    - In the previous example:
      - The URL segment Parameters isn't used.
      - The **DummyString** and **DummyInt** parameters are passed in the **query string**.
      - The `?` (question mark) in the above URL is a separator, and the query string follows.
      - The `&` character separates field-value pairs.
 
 ### Using id

```cs 
public string DummyMethodWithID(string dummyString, int ID = 1)
{
    return HtmlEncoder.Default.Encode($" - DummyString: {dummyString}, ID: {ID}");
}
```

- `https://localhost:7122/Dummy/DummyMethodWithID/5?dummyString=Luis`
  - ` - DummyString: Luis, ID: 5`
- `https://localhost:7122/Dummy/DummyMethodWithID?dummyString=Luis`
  - ` - DummyString: Luis, ID: 1`

- In the preceding URL:
  - The third URL segment matched the route parameter id.
  - The `DummyMethodWithID` method contains a parameter id that matched the URL template in the MapControllerRoute method.
  - The trailing ? starts the query string.

``` cs
app.MapControllerRoute(
    name: "default",
    pattern: "{controller=Home}/{action=Index}/{id?}");
```
- In the preceding example:
  - The third URL segment matched the route parameter id.
  - The Welcome method contains a parameter id that matched the URL template in the MapControllerRoute method.
  - The trailing `?` (in `id?`) indicates the id parameter is optional.
