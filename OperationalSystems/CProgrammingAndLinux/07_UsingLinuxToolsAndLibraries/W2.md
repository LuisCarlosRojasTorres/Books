<!-- vscode-markdown-toc -->
* 1. [Modularizing a program](#Modularizingaprogram)
	* 1.1. [GCC details](#GCCdetails)
	* 1.2. [Object files](#Objectfiles)
	* 1.3. [Modify object files](#Modifyobjectfiles)
* 2. [Creating and using a Makefile](#CreatingandusingaMakefile)
	* 2.1. [Make file](#Makefile)
	* 2.2. [More elaborate Makefile](#MoreelaborateMakefile)
	* 2.3. [Run a program with Makefile](#RunaprogramwithMakefile)
* 3. [Creating a static Library](#CreatingastaticLibrary)
	* 3.1. [Create your library](#Createyourlibrary)
	* 3.2. [Modify your Library](#ModifyyourLibrary)
	* 3.3. [Ultimate makefile](#Ultimatemakefile)

<!-- vscode-markdown-toc-config
	numbering=true
	autoSave=true
	/vscode-markdown-toc-config -->
<!-- /vscode-markdown-toc -->

##  1. <a name='Modularizingaprogram'></a>Modularizing a program

###  1.1. <a name='GCCdetails'></a>GCC details
- Assume a c program `MainFile.c`:

``` c
#include<stdio.h>

int main(){
	printf("This is MainFile.c\n");
	return 0;
}
```
- The easiest way to compile:
  - `gcc MainFile.c` which outputs `a.out` 
    - `a.out` can be executed through `./a.out`
- To define a name for the output file:
  - `gcc -o SomeExecutableName MainFile.c` which outputs `SomeExecutableName`
    - `SomeExecutableName` can be executed through `./SomeExecutableName`
- A source file is converted into an `object file` which is a binary file in a language that a computer can understand. It has a `.o` extension.
  - `gcc -c -o MainFile.o MainFile.c`
- Now, to link that object file into an executable:
  - `gcc -o SomeExecutableName MainFile.o`


###  1.2. <a name='Objectfiles'></a>Object files
- Lets say we have the following files:
  - `f.h`:
	``` c
	void printFunction();
	```
  - `f.c`: a dummy file with a void function.
	``` c
	#include<stdio.h>

	void printFunction(){
   		printf("This is the printFunction in SourceFile");
	}
	```
  - `m.c`: Which has the MAIN function.
	``` c
	#include<stdio.h>
	#include "f.h"

	int main(){
		printFunction();
		printf("This is MainFile.c\n");
		return 0;
	}
	``` 
- There is a sequence To compile the program.
  1. Compile the non-main methods files
     - `gcc -c -o f.o f.c`
  2. Compile the main method file
     - `gcc -c -o m.o m.c`
  3. Links the object files
     - `gcc -o SomeName m.o f.o `  
  4. Run to verify that eve3rything is as expected
     - `./SomeName`


###  1.3. <a name='Modifyobjectfiles'></a>Modify object files
- From the previous example, if `f.c` and/or `m.c` are modified:
  - Convert the `c` files into `o` files
  - Then make the executable. 

##  2. <a name='CreatingandusingaMakefile'></a>Creating and using a Makefile

###  2.1. <a name='Makefile'></a>Make file
- Its a file which specify the process described in the previous section. So you can build your program **running this file**.
- The file is called `Makefile` (its a text file).
  - THe file is called using `make` in the terminal.
- It has the following sintaxis:

```
target: dependencies
	command
```
Where:
- target: what will be produced i.e. an `.o` file? an executable?
- dependencies: source file and headers for an object file. Or, many object files for an executable
- command: command use to build the target.

From the previous example with `m.c` `f.c` and the `f.h` files. The `Makefile` will be:

``` make
m: m.o f.o 
	gcc -std=c11 -Wall -fmax-errors=10 -Wextra -o m m.o f.o 
    
m.o: m.c f.h 
	gcc -std=c11 -Wall -fmax-errors=10 -Wextra -c -o m.o m.c   
	
f.o: f.c 
	gcc -std=c11 -Wall -fmax-errors=10 -Wextra -c -o f.o f.c
```
- Then to build this only use `make` in the terminal.

###  2.2. <a name='MoreelaborateMakefile'></a>More elaborate Makefile
- A more  advanced makefile: 

``` make
# This is a comment
# define the C compiler
CC = gcc
# define the compiler flags
CFLAGS = -std=c11 -Wall -Wextra
# define the library paths in addition to /usr/lib
LIBS = -std=c11 -Wall -Wextra

# define the object files that this project needs
OBJFILES = m.o f.o
# define the name of the executable file
MAIN = SomeExecutableName

## The content below is generic - one typically only adjust the above

all: $(MAIN)

$(MAIN): $(OBJECT)
	$(CC) $(CFLAGS) -o $(MAIN) $(OBJFILES)

%.o: %.c
	$(CC) $(CFLAGS) -c -o $@ $<

clean:
	rm -f $(OBJFILES) $(MAIN)
```

###  2.3. <a name='RunaprogramwithMakefile'></a>Run a program with Makefile

##  3. <a name='CreatingastaticLibrary'></a>Creating a static Library

###  3.1. <a name='Createyourlibrary'></a>Create your library

###  3.2. <a name='ModifyyourLibrary'></a>Modify your Library

###  3.3. <a name='Ultimatemakefile'></a>Ultimate makefile